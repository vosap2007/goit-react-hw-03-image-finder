(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{38:function(t,e,o){"use strict";o.r(e);var a=o(1),n=o(0),r=o(10),c=o.n(r),s=o(3),i=o(4),h=o(6),l=o(5),p=o(9),u=o(11),m=o.n(u),d=(o(8),function(t){Object(h.a)(o,t);var e=Object(l.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={photo:[],loading:!1,error:null,page:1},t.loadMore=function(){fetch("https://pixabay.com/api/?q=".concat(t.props.photoName,"&page=").concat(t.state.page,"&key=19156356-c40e703531fee6556ca92e5f2&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.json()})).then((function(e){t.setState((function(t){return{photo:[].concat(Object(p.a)(t.photo),Object(p.a)(e.hits)),page:t.page+1}}))}))},t.handlePhoto=function(e){e.preventDefault(),t.props.onPhoto(t.state.photo)},t}return Object(i.a)(o,[{key:"componentDidUpdate",value:function(t,e){var o=this;t.photoName!==this.props.photoName&&(this.setState({loading:!0,photo:[]}),fetch("https://pixabay.com/api/?q=".concat(this.props.photoName,"&page=").concat(this.state.page,"&key=19156356-c40e703531fee6556ca92e5f2&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.json()})).then((function(t){return o.setState({photo:t.hits,page:e.page+1})})).catch((function(t){return o.setState({error:t})})).finally((function(){return o.setState({loading:!1})}))),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{children:[this.state.loading&&Object(a.jsx)(m.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3,className:"Spiner"}),this.state.error&&Object(a.jsxs)("h1",{children:["Picture ",this.props.photoName," not nyen"]}),this.state.photo.length>0&&Object(a.jsxs)("ul",{className:"ImageGallery",children:[this.state.photo.map((function(e){var o=e.id,n=e.tags,r=e.webformatURL,c=(e.webformatWidth,e.largeImageURL);return Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)("img",{src:r,alt:n,onClick:function(){return t.props.togleModal(c)},className:"ImageGalleryItem-image"})},o)})),Object(a.jsx)("button",{type:"submit",onClick:this.loadMore,className:"Button",children:"Load more"})]})]})}}]),o}(n.Component)),b=function(t){Object(h.a)(o,t);var e=Object(l.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={},t.handleKeyDown=function(e){"Escape"===e.code&&t.props.togleModal()},t.handleOverlay=function(e){e.currentTarget===e.target&&t.props.togleModal()},t}return Object(i.a)(o,[{key:"componentDidMount",value:function(){console.log("\u042d\u0442\u043e"),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillMount",value:function(){console.log("\u0435\u0441\u043a\u0435\u0439\u043f"),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"Overlay",onClick:this.handleOverlay,children:Object(a.jsx)("div",{className:"Modal",children:Object(a.jsx)("img",{src:this.props.openModalPhoto,alt:""})})})}}]),o}(n.Component),j=function(t){Object(h.a)(o,t);var e=Object(l.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={photoName:""},t.handleNameChange=function(e){t.setState({photoName:e.currentTarget.value.toLowerCase()})},t.handleSubmit=function(e){e.preventDefault(),""!==t.state.photoName.trim()?(t.props.onSubmit(t.state.photoName),t.setState({photoName:""})):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0437\u0430\u043f\u0440\u043e\u0441.")},t}return Object(i.a)(o,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("header",{className:"searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",value:this.state.photoName,onChange:this.handleNameChange,placeholder:"Search images and photos"})]})})})}}]),o}(n.Component),f=function(t){Object(h.a)(o,t);var e=Object(l.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={photoName:"",showModal:!1,photo:""},t.togleModal=function(e){t.setState((function(t){return{showModal:!t.showModal,photo:t.photo?"":e}}))},t.handleFormSubmit=function(e){t.setState({photoName:e})},t.handlePhotoSubmit=function(e){t.setState({photo:e})},t}return Object(i.a)(o,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(j,{onSubmit:this.handleFormSubmit}),Object(a.jsx)(d,{photoName:this.state.photoName,togleModal:this.togleModal,onPhoto:this.handlePhotoSubmit}),this.state.showModal&&Object(a.jsx)(b,{openModalPhoto:this.state.photo,togleModal:this.togleModal})]})}}]),o}(n.Component);c.a.render(Object(a.jsx)(f,{}),document.querySelector("#root"))},8:function(t,e,o){}},[[38,1,2]]]);
//# sourceMappingURL=main.5d825310.chunk.js.map